var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){const e=t.subscribe(n);return e.unsubscribe?()=>e.unsubscribe():e}function c(t){let n;return i(t,t=>n=t)(),n}function u(t,n,e){t.$$.on_destroy.push(i(n,e))}function s(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function $(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}let h;function g(t){h=t}const m=[],y=[],b=[],x=[],w=Promise.resolve();let _=!1;function v(t){b.push(t)}function A(){const t=new Set;do{for(;m.length;){const t=m.shift();g(t),M(t.$$)}for(;y.length;)y.pop()();for(let n=0;n<b.length;n+=1){const e=b[n];t.has(e)||(e(),t.add(e))}b.length=0}while(m.length);for(;x.length;)x.pop()();_=!1}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(v)}}const k=new Set;let K;function E(t,n){t&&t.i&&(k.delete(t),t.i(n))}function N(t,n,e,r){if(t&&t.o){if(k.has(t))return;k.add(t),K.c.push(()=>{k.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function O(t,e,l){const{fragment:i,on_mount:c,on_destroy:u,after_update:s}=t.$$;i&&i.m(e,l),v(()=>{const e=c.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]}),s.forEach(v)}function T(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function j(t,n){-1===t.$$.dirty[0]&&(m.push(t),_||(_=!0,w.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function B(n,o,l,i,c,u,s=[-1]){const a=h;g(n);const f=o.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:e(),dirty:s};let p=!1;d.ctx=l?l(n,f,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&j(n,t)),e}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!i&&i(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&E(n.$$.fragment),O(n,o.target,o.anchor),A()),g(a)}class C{$destroy(){T(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const P=[];function S(n,e=t){let r;const o=[];function i(t){if(l(n,t)&&(n=t,r)){const t=!P.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),P.push(e,n)}if(t){for(let t=0;t<P.length;t+=2)P[t][0](P[t+1]);P.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(l,c=t){const u=[l,c];return o.push(u),1===o.length&&(r=e(i)||t),l(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function q(n,e,l){const i=!Array.isArray(n),c=i?[n]:n,u=e.length<2;return{subscribe:S(l,n=>{let l=!1;const s=[];let a=0,f=t;const d=()=>{if(a)return;f();const r=e(i?s[0]:s,n);u?n(r):f=o(r)?r:t},p=c.map((t,n)=>t.subscribe(t=>{s[n]=t,a&=~(1<<n),l&&d()},()=>{a|=1<<n}));return l=!0,d(),function(){r(p),f()}}).subscribe}}const X=S(100),z=S(100),D=q([X,z],([t,n])=>t*n),F=function(t){const n=Math.floor(.1*t);return function(t){let n;for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));n=t[e],t[e]=t[r],t[r]=n}return t}([...Array(t-n-1).fill(null).map(()=>({isMine:!1,stateKnown:!1})),...Array(1).fill(null).map(()=>({isMine:!1,stateKnown:!0})),...Array(n).fill(null).map(()=>({isMine:!0,stateKnown:!1}))])}(c(D)).map((function(t){const{subscribe:n,set:e,update:r}=S(t);return{subscribe:n,set:e,reveal:()=>r(t=>({...t,stateKnown:!0}))}})),G=F.map((t,n)=>function(t){const n=function(t,n,e){const r=t%n,o=Math.floor(t/n);return[[r-1,o-1],[r,o-1],[r+1,o-1],[r-1,o],[r+1,o],[r-1,o+1],[r,o+1],[r+1,o+1]].filter(t=>t[0]>=0).filter(t=>t[1]>=0).filter(t=>t[0]<n).filter(t=>t[1]<e).map(t=>t[0]+t[1]*n)}(t,c(X),c(z)).map(t=>F[t]);return{...q(n,t=>t),reveal:()=>n.forEach(t=>t.reveal())}}(n));function H(n){let e,r;return{c(){var t;e=d("div"),t=n[2],r=document.createTextNode(t),p(e,"class","cell svelte-80gadg"),$(e,"color",n[0]),$(e,"background-color",n[1])},m(t,n){a(t,e,n),s(e,r)},p(t,[n]){4&n&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(r,t[2]),1&n&&$(e,"color",t[0]),2&n&&$(e,"background-color",t[1])},i:t,o:t,d(t){t&&f(e)}}}function I(n,e,r){let o,l,c=t,u=t;n.$$.on_destroy.push(()=>c()),n.$$.on_destroy.push(()=>u());let s,a,f,d,p,$,h,g,m,y,b,x,w,_,{index:v}=e;return n.$set=t=>{"index"in t&&r(5,v=t.index)},n.$$.update=()=>{32&n.$$.dirty&&(r(3,d=F[v]),c(),c=i(d,t=>r(7,o=t))),32&n.$$.dirty&&(r(4,p=G[v]),u(),u=i(p,t=>r(11,l=t))),128&n.$$.dirty&&r(6,$=o.isMine),128&n.$$.dirty&&r(8,h=o.stateKnown),320&n.$$.dirty&&r(9,g=h&&!$),2048&n.$$.dirty&&r(10,m=l.filter(t=>!t.stateKnown).length),2048&n.$$.dirty&&r(12,y=l.filter(t=>t.isMine).length),2048&n.$$.dirty&&r(13,b=l.filter(t=>t.isMine&&t.stateKnown).length),12288&n.$$.dirty&&r(14,x=y-b),12800&n.$$.dirty&&r(15,w=g&&y===b),17920&n.$$.dirty&&r(16,_=g&&x===m),32784&n.$$.dirty&&w&&setTimeout(()=>p.reveal(),0),65552&n.$$.dirty&&_&&setTimeout(()=>p.reveal(),0),4160&n.$$.dirty&&r(0,s=$?"white":["transparent","blue","green","red","purple","maroon","#0aa","black","#444"][y]),320&n.$$.dirty&&r(1,a=h?$?"#f55":"white":null),4416&n.$$.dirty&&r(2,f=h?$?"X":y:"")},[s,a,f,d,p,v]}class J extends C{constructor(t){super(),B(this,t,I,H,l,{index:5})}}function L(t,n,e){const r=t.slice();return r[3]=n[e],r[5]=e,r}function Q(n){let e;const r=new J({props:{index:n[5]}});return{c(){var t;(t=r.$$.fragment)&&t.c()},m(t,n){O(r,t,n),e=!0},p:t,i(t){e||(E(r.$$.fragment,t),e=!0)},o(t){N(r.$$.fragment,t),e=!1},d(t){T(r,t)}}}function R(t){let n,e,o,l,i=Array(t[2]).fill(null),c=[];for(let n=0;n<i.length;n+=1)c[n]=Q(L(t,i,n));const u=t=>N(c[t],1,1,()=>{c[t]=null});return{c(){n=d("main"),e=d("div");for(let t=0;t<c.length;t+=1)c[t].c();p(e,"class","board svelte-1a2xkkt"),p(e,"style",o=`grid-template-columns: repeat(${t[0]}, 8px); grid-template-rows: repeat(${t[1]}, 8px)`)},m(t,r){a(t,n,r),s(n,e);for(let t=0;t<c.length;t+=1)c[t].m(e,null);l=!0},p(t,[n]){if(4&n){let o;for(i=Array(t[2]).fill(null),o=0;o<i.length;o+=1){const r=L(t,i,o);c[o]?(c[o].p(r,n),E(c[o],1)):(c[o]=Q(r),c[o].c(),E(c[o],1),c[o].m(e,null))}for(K={r:0,c:[],p:K},o=i.length;o<c.length;o+=1)u(o);K.r||r(K.c),K=K.p}(!l||3&n&&o!==(o=`grid-template-columns: repeat(${t[0]}, 8px); grid-template-rows: repeat(${t[1]}, 8px)`))&&p(e,"style",o)},i(t){if(!l){for(let t=0;t<i.length;t+=1)E(c[t]);l=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)N(c[t]);l=!1},d(t){t&&f(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(c,t)}}}function U(t,n,e){let r,o,l;return u(t,X,t=>e(0,r=t)),u(t,z,t=>e(1,o=t)),u(t,D,t=>e(2,l=t)),[r,o,l]}return new class extends C{constructor(t){super(),B(this,t,U,R,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
