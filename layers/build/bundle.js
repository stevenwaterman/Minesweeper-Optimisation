var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){const e=t.subscribe(n);return e.unsubscribe?()=>e.unsubscribe():e}function c(t){let n;return l(t,t=>n=t)(),n}function u(t,n,e){t.$$.on_destroy.push(l(n,e))}function s(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function d(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function p(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}let m;function y(t){m=t}const b=[],x=[],w=[],v=[],M=Promise.resolve();let _=!1;function A(t){w.push(t)}function k(){const t=new Set;do{for(;b.length;){const t=b.shift();y(t),K(t.$$)}for(;x.length;)x.pop()();for(let n=0;n<w.length;n+=1){const e=w[n];t.has(e)||(e(),t.add(e))}w.length=0}while(b.length);for(;v.length;)v.pop()();_=!1}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(A)}}const E=new Set;let j;function q(){j={r:0,c:[],p:j}}function B(){j.r||r(j.c),j=j.p}function N(t,n){t&&t.i&&(E.delete(t),t.i(n))}function O(t,n,e,r){if(t&&t.o){if(E.has(t))return;E.add(t),j.c.push(()=>{E.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function S(t,e,i){const{fragment:l,on_mount:c,on_destroy:u,after_update:s}=t.$$;l&&l.m(e,i),A(()=>{const e=c.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]}),s.forEach(A)}function T(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function C(t,n){-1===t.$$.dirty[0]&&(b.push(t),_||(_=!0,M.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(n,o,i,l,c,u,s=[-1]){const a=m;y(n);const f=o.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:e(),dirty:s};let p=!1;d.ctx=i?i(n,f,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&C(n,t)),e}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&N(n.$$.fragment),S(n,o.target,o.anchor),k()),y(a)}class G{$destroy(){T(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const X=[];function z(n,e=t){let r;const o=[];function l(t){if(i(n,t)&&(n=t,r)){const t=!X.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),X.push(e,n)}if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:l,update:function(t){l(t(n))},subscribe:function(i,c=t){const u=[i,c];return o.push(u),1===o.length&&(r=e(l)||t),i(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function D(n,e,i){const l=!Array.isArray(n),c=l?[n]:n,u=e.length<2;return{subscribe:z(i,n=>{let i=!1;const s=[];let a=0,f=t;const d=()=>{if(a)return;f();const r=e(l?s[0]:s,n);u?n(r):f=o(r)?r:t},p=c.map((t,n)=>t.subscribe(t=>{s[n]=t,a&=~(1<<n),i&&d()},()=>{a|=1<<n}));return i=!0,d(),function(){r(p),f()}}).subscribe}}const F=z(100),H=z(100),I=D([F,H],([t,n])=>t*n),J=function(t){const n=Math.floor(.1*t);return function(t){let n;for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));n=t[e],t[e]=t[r],t[r]=n}return t}([...Array(t-n-1).fill(null).map(()=>({isMine:!1,stateKnown:!1})),...Array(1).fill(null).map(()=>({isMine:!1,stateKnown:!0})),...Array(n).fill(null).map(()=>({isMine:!0,stateKnown:!1}))])}(c(I)).map((function(t){const{subscribe:n,set:e,update:r}=z(t);return{subscribe:n,set:e,reveal:()=>r(t=>({...t,stateKnown:!0}))}})),L=J.map((t,n)=>function(t){const n=function(t,n,e){const r=t%n,o=Math.floor(t/n);return[[r-1,o-1],[r,o-1],[r+1,o-1],[r-1,o],[r+1,o],[r-1,o+1],[r,o+1],[r+1,o+1]].filter(t=>t[0]>=0).filter(t=>t[1]>=0).filter(t=>t[0]<n).filter(t=>t[1]<e).map(t=>t[0]+t[1]*n)}(t,c(F),c(H)).map(t=>J[t]);return{...D(n,t=>t),reveal:()=>n.forEach(t=>t.reveal())}}(n));function Q(n){let e,r;return{c(){e=p("div"),r=$(n[4]),h(e,"class","cell svelte-wjqvhx"),g(e,"color",n[0]),g(e,"background-color",n[3])},m(t,n){a(t,e,n),s(e,r)},p(t,[n]){16&n&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(r,t[4]),1&n&&g(e,"color",t[0]),8&n&&g(e,"background-color",t[3])},i:t,o:t,d(t){t&&f(e)}}}function R(n,e,r){let o,i,c,s=t,a=t;u(n,F,t=>r(18,c=t)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>a());let f,d,p,$,h,g,m,y,b,x,w,v,M,_,A,k,K,{index:E}=e;return n.$set=t=>{"index"in t&&r(5,E=t.index)},n.$$.update=()=>{32&n.$$.dirty&&(r(1,d=J[E]),s(),s=l(d,t=>r(7,o=t))),32&n.$$.dirty&&(r(2,p=L[E]),a(),a=l(p,t=>r(11,i=t))),128&n.$$.dirty&&r(6,$=o.isMine),128&n.$$.dirty&&r(8,h=o.stateKnown),320&n.$$.dirty&&r(9,g=h&&!$),2048&n.$$.dirty&&r(10,m=i.filter(t=>!t.stateKnown).length),2048&n.$$.dirty&&r(12,y=i.filter(t=>t.isMine).length),2048&n.$$.dirty&&r(13,b=i.filter(t=>t.isMine&&t.stateKnown).length),12288&n.$$.dirty&&r(14,x=y-b),12800&n.$$.dirty&&r(15,w=g&&y===b),17920&n.$$.dirty&&r(16,v=g&&x===m),32772&n.$$.dirty&&w&&setTimeout(()=>p.reveal(),0),65540&n.$$.dirty&&v&&setTimeout(()=>p.reveal(),0),4416&n.$$.dirty&&r(0,f=h?$?"white":["transparent","blue","green","red","purple","maroon","#0aa","black","#444"][y]:"transparent"),262176&n.$$.dirty&&r(17,M=Math.floor(E/c)),262176&n.$$.dirty&&r(19,_=E%c),655360&n.$$.dirty&&r(20,A=(M+_)%2==0),1048896&n.$$.dirty&&r(3,k=function(t,n,e){return t&&n?"#f55":t&&!n&&e?"#fff":!t||n||e?!t&&e?"#aaa":t||e?void 0:"#999":"#ddd"}(h,$,A)),4160&n.$$.dirty&&r(4,K=$?"X":y)},[f,d,p,k,K,E]}class U extends G{constructor(t){super(),P(this,t,R,Q,i,{index:5})}}function V(t,n,e){const r=t.slice();return r[15]=n[e],r}function W(t,n,e){const r=t.slice();return r[12]=n[e],r}function Y(t){let n;const e=new U({props:{index:t[15]}});return{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,r){S(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.index=t[15]),e.$set(r)},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Z(t){let n,e,r,o=t[12].indices,i=[];for(let n=0;n<o.length;n+=1)i[n]=Y(V(t,o,n));const l=t=>O(i[t],1,1,()=>{i[t]=null});return{c(){n=p("div");for(let t=0;t<i.length;t+=1)i[t].c();e=$(" "),h(n,"class","boardSection svelte-1l6b2wk"),g(n,"grid-template-columns","repeat("+t[12].width+", 8px)"),g(n,"grid-template-rows","repeat("+t[12].height+", 8px)")},m(t,o){a(t,n,o);for(let t=0;t<i.length;t+=1)i[t].m(n,null);s(n,e),r=!0},p(t,c){if(8&c){let r;for(o=t[12].indices,r=0;r<o.length;r+=1){const l=V(t,o,r);i[r]?(i[r].p(l,c),N(i[r],1)):(i[r]=Y(l),i[r].c(),N(i[r],1),i[r].m(n,e))}for(q(),r=o.length;r<i.length;r+=1)l(r);B()}(!r||8&c)&&g(n,"grid-template-columns","repeat("+t[12].width+", 8px)"),(!r||8&c)&&g(n,"grid-template-rows","repeat("+t[12].height+", 8px)")},i(t){if(!r){for(let t=0;t<o.length;t+=1)N(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)O(i[t]);r=!1},d(t){t&&f(n),d(i,t)}}}function tt(t){let n,e,r,o=t[3],i=[];for(let n=0;n<o.length;n+=1)i[n]=Z(W(t,o,n));const l=t=>O(i[t],1,1,()=>{i[t]=null});return{c(){n=p("main"),e=p("div");for(let t=0;t<i.length;t+=1)i[t].c();h(e,"class","sectionGrid svelte-1l6b2wk"),g(e,"grid-template-columns","repeat("+t[1]+", "+8*t[0]+"px)"),g(e,"grid-template-rows","repeat("+t[2]+", "+8*t[0]+"px)")},m(t,o){a(t,n,o),s(n,e);for(let t=0;t<i.length;t+=1)i[t].m(e,null);r=!0},p(t,[n]){if(8&n){let r;for(o=t[3],r=0;r<o.length;r+=1){const l=W(t,o,r);i[r]?(i[r].p(l,n),N(i[r],1)):(i[r]=Z(l),i[r].c(),N(i[r],1),i[r].m(e,null))}for(q(),r=o.length;r<i.length;r+=1)l(r);B()}(!r||3&n)&&g(e,"grid-template-columns","repeat("+t[1]+", "+8*t[0]+"px)"),(!r||5&n)&&g(e,"grid-template-rows","repeat("+t[2]+", "+8*t[0]+"px)")},i(t){if(!r){for(let t=0;t<o.length;t+=1)N(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)O(i[t]);r=!1},d(t){t&&f(n),d(i,t)}}}function nt(t,n,e){let r,o,i,l,c,s,a,f,d,p,$;return u(t,H,t=>e(5,r=t)),u(t,F,t=>e(6,o=t)),u(t,I,t=>e(8,i=t)),t.$$.update=()=>{96&t.$$.dirty&&(l=Array(r).fill(null).map((t,n)=>Array(o).fill(null).map((t,e)=>e+n*o))),256&t.$$.dirty&&e(7,c=Math.max(20,i/100)),128&t.$$.dirty&&e(0,s=Math.round(Math.sqrt(c))),65&t.$$.dirty&&e(1,a=Math.ceil(o/s)),33&t.$$.dirty&&e(2,f=Math.ceil(r/s)),67&t.$$.dirty&&e(9,d=o-(a-1)*s),37&t.$$.dirty&&e(10,p=r-(f-1)*s),1607&t.$$.dirty&&e(3,$=function(t,n,e,r,o,i,l){const c=[];for(let u=0;u<r;u++)for(let s=0;s<t;s++){const a=u===r-1?i:o,f=s===t-1?e:n,d=u*o*l+s*n,p=[];for(let t=0;t<a;t++)for(let n=0;n<f;n++){const e=n+t*l;p.push(d+e)}c.push({x:s,y:u,width:f,height:a,indices:p})}return c}(a,s,d,f,s,p,o))},[s,a,f,$]}return new class extends G{constructor(t){super(),P(this,t,nt,tt,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
