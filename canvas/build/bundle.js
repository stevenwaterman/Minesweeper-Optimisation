var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){const e=t.subscribe(n);return e.unsubscribe?()=>e.unsubscribe():e}function u(t){let n;return l(t,t=>n=t)(),n}function c(t,n,e){t.$$.on_destroy.push(l(n,e))}function f(t,n){t.appendChild(n)}function s(t){return document.createElement(t)}function a(){return t=" ",document.createTextNode(t);var t}function d(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let $;function h(t){$=t}const p=[],y=[],g=[],m=[],b=Promise.resolve();let x=!1;function _(t){g.push(t)}function w(){const t=new Set;do{for(;p.length;){const t=p.shift();h(t),v(t.$$)}for(;y.length;)y.pop()();for(let n=0;n<g.length;n+=1){const e=g[n];t.has(e)||(e(),t.add(e))}g.length=0}while(p.length);for(;m.length;)m.pop()();x=!1}function v(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const M=new Set;let A;function K(t,n){t&&t.i&&(M.delete(t),t.i(n))}function E(t,n,e,r){if(t&&t.o){if(M.has(t))return;M.add(t),A.c.push(()=>{M.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function k(t,e,i){const{fragment:l,on_mount:u,on_destroy:c,after_update:f}=t.$$;l&&l.m(e,i),_(()=>{const e=u.map(n).filter(o);c?c.push(...e):r(e),t.$$.on_mount=[]}),f.forEach(_)}function S(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function T(t,n){-1===t.$$.dirty[0]&&(p.push(t),x||(x=!0,b.then(w)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function B(n,o,i,l,u,c,f=[-1]){const s=$;h(n);const a=o.props||{},d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:e(),dirty:f};let p=!1;d.ctx=i?i(n,a,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&T(n,t)),e}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&K(n.$$.fragment),k(n,o.target,o.anchor),w()),h(s)}class C{$destroy(){S(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const N=[];function O(n,e=t){let r;const o=[];function l(t){if(i(n,t)&&(n=t,r)){const t=!N.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),N.push(e,n)}if(t){for(let t=0;t<N.length;t+=2)N[t][0](N[t+1]);N.length=0}}}return{set:l,update:function(t){l(t(n))},subscribe:function(i,u=t){const c=[i,u];return o.push(c),1===o.length&&(r=e(l)||t),i(n),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function j(n,e,i){const l=!Array.isArray(n),u=l?[n]:n,c=e.length<2;return{subscribe:O(i,n=>{let i=!1;const f=[];let s=0,a=t;const d=()=>{if(s)return;a();const r=e(l?f[0]:f,n);c?n(r):a=o(r)?r:t},$=u.map((t,n)=>t.subscribe(t=>{f[n]=t,s&=~(1<<n),i&&d()},()=>{s|=1<<n}));return i=!0,d(),function(){r($),a()}}).subscribe}}const P=O(null),q=O(100),X=O(100),z=j([q,X],([t,n])=>Math.floor(800/Math.max(t,n))),D=j([q,X],([t,n])=>t*n),F=function(t){const n=Math.floor(.1*t);return function(t){let n;for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));n=t[e],t[e]=t[r],t[r]=n}return t}([...Array(t-n-1).fill(null).map(()=>({isMine:!1,stateKnown:!1})),...Array(1).fill(null).map(()=>({isMine:!1,stateKnown:!0})),...Array(n).fill(null).map(()=>({isMine:!0,stateKnown:!1}))])}(u(D)).map((function(t){const{subscribe:n,set:e,update:r}=O(t);return{subscribe:n,set:e,reveal:()=>r(t=>({...t,stateKnown:!0}))}})),G=F.map((t,n)=>function(t){const n=function(t,n,e){const r=t%n,o=Math.floor(t/n);return[[r-1,o-1],[r,o-1],[r+1,o-1],[r-1,o],[r+1,o],[r-1,o+1],[r,o+1],[r+1,o+1]].filter(t=>t[0]>=0).filter(t=>t[1]>=0).filter(t=>t[0]<n).filter(t=>t[1]<e).map(t=>t[0]+t[1]*n)}(t,u(q),u(X)).map(t=>F[t]);return{...j(n,t=>t),reveal:()=>n.forEach(t=>t.reveal())}}(n));function H(n,e,r){let o,i,u,f,s,a=t,d=t;c(n,q,t=>r(15,u=t)),c(n,z,t=>r(18,f=t)),c(n,P,t=>r(27,s=t)),n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>d());let $,h,p,y,g,m,b,x,_,w,v,M,A,K,E,k,S,T,B,C,N,O,{index:j}=e;return n.$set=t=>{"index"in t&&r(2,j=t.index)},n.$$.update=()=>{4&n.$$.dirty&&(r(0,$=F[j]),a(),a=l($,t=>r(4,o=t))),4&n.$$.dirty&&(r(1,h=G[j]),d(),d=l(h,t=>r(8,i=t))),16&n.$$.dirty&&r(3,p=o.isMine),16&n.$$.dirty&&r(5,y=o.stateKnown),40&n.$$.dirty&&r(6,g=y&&!p),256&n.$$.dirty&&r(7,m=i.filter(t=>!t.stateKnown).length),256&n.$$.dirty&&r(9,b=i.filter(t=>t.isMine).length),256&n.$$.dirty&&r(10,x=i.filter(t=>t.isMine&&t.stateKnown).length),1536&n.$$.dirty&&r(11,_=b-x),1600&n.$$.dirty&&r(12,w=g&&b===x),2240&n.$$.dirty&&r(13,v=g&&_===m),4098&n.$$.dirty&&w&&setTimeout(()=>h.reveal(),0),8194&n.$$.dirty&&v&&setTimeout(()=>h.reveal(),0),32772&n.$$.dirty&&r(14,M=Math.floor(j/u)),32772&n.$$.dirty&&r(16,A=j%u),278528&n.$$.dirty&&r(17,K=M*f),327680&n.$$.dirty&&r(19,E=A*f),393216&n.$$.dirty&&r(20,k=K+f/2),786432&n.$$.dirty&&r(21,S=E+f/2),81920&n.$$.dirty&&r(22,T=(M+A)%2==0),520&n.$$.dirty&&r(23,B=p?"X":b),520&n.$$.dirty&&r(24,C=p?"white":["transparent","blue","green","red","purple","maroon","#0aa","black","#444"][b]),4194344&n.$$.dirty&&r(25,N=function(t,n,e){return t&&n&&e?"#f55":t&&n&&!e?"#d33":t&&!n&&e?"#fff":!t||n||e?!t&&e?"#aaa":t||e?void 0:"#777":"#ccc"}(y,p,T)),134217728&n.$$.dirty&&r(26,O=null===s?null:s.getContext("2d")),67371008&n.$$.dirty&&null!=O&&r(26,O.font=f-1+"px arial",O),67108864&n.$$.dirty&&null!=O&&r(26,O.textAlign="center",O),67108864&n.$$.dirty&&null!=O&&r(26,O.textBaseline="middle",O),129892384&n.$$.dirty&&function(t,n,e,r,o,i,l,u,c,f){null!==t&&(t.beginPath(),t.fillStyle=f,t.rect(n,e,i,i),t.fill(),l&&(t.fillStyle=c,t.fillText(u,r,o)))}(O,K,E,k,S,f,y,B,C,N)},[$,h,j]}class I extends C{constructor(t){super(),B(this,t,H,null,i,{index:2})}}function J(t,n,e){const r=t.slice();return r[6]=n[e],r[8]=e,r}function L(n){let e;const r=new I({props:{index:n[8]}});return{c(){var t;(t=r.$$.fragment)&&t.c()},m(t,n){k(r,t,n),e=!0},p:t,i(t){e||(K(r.$$.fragment,t),e=!0)},o(t){E(r.$$.fragment,t),e=!1},d(t){S(r,t)}}}function Q(t){let n,e,o,i,l,u,c=Array(t[4]).fill(null),$=[];for(let n=0;n<c.length;n+=1)$[n]=L(J(t,c,n));const h=t=>E($[t],1,1,()=>{$[t]=null});return{c(){n=s("main"),e=s("canvas"),l=a();for(let t=0;t<$.length;t+=1)$[t].c();d(e,"width",o=t[0]*t[1]),d(e,"height",i=t[2]*t[1])},m(r,o){!function(t,n,e){t.insertBefore(n,e||null)}(r,n,o),f(n,e),t[5](e),f(n,l);for(let t=0;t<$.length;t+=1)$[t].m(n,null);u=!0},p(t,[l]){if((!u||3&l&&o!==(o=t[0]*t[1]))&&d(e,"width",o),(!u||6&l&&i!==(i=t[2]*t[1]))&&d(e,"height",i),16&l){let e;for(c=Array(t[4]).fill(null),e=0;e<c.length;e+=1){const r=J(t,c,e);$[e]?($[e].p(r,l),K($[e],1)):($[e]=L(r),$[e].c(),K($[e],1),$[e].m(n,null))}for(A={r:0,c:[],p:A},e=c.length;e<$.length;e+=1)h(e);A.r||r(A.c),A=A.p}},i(t){if(!u){for(let t=0;t<c.length;t+=1)K($[t]);u=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)E($[t]);u=!1},d(e){var r;e&&(r=n).parentNode.removeChild(r),t[5](null),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}($,e)}}}function R(t,n,e){let r,o,i,l,u;return c(t,q,t=>e(0,r=t)),c(t,z,t=>e(1,o=t)),c(t,X,t=>e(2,i=t)),c(t,P,t=>e(3,l=t)),c(t,D,t=>e(4,u=t)),[r,o,i,l,u,function(t){y[t?"unshift":"push"](()=>{P.set(l=t)})}]}return new class extends C{constructor(t){super(),B(this,t,R,Q,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
