var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){const e=t.subscribe(n);return e.unsubscribe?()=>e.unsubscribe():e}function c(t){let n;return l(t,t=>n=t)(),n}function u(t,n,e){t.$$.on_destroy.push(l(n,e))}function s(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function $(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}let h;function g(t){h=t}const m=[],y=[],b=[],x=[],v=Promise.resolve();let w=!1;function _(t){b.push(t)}function M(){const t=new Set;do{for(;m.length;){const t=m.shift();g(t),A(t.$$)}for(;y.length;)y.pop()();for(let n=0;n<b.length;n+=1){const e=b[n];t.has(e)||(e(),t.add(e))}b.length=0}while(m.length);for(;x.length;)x.pop()();w=!1}function A(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const k=new Set;let K;function E(t,n){t&&t.i&&(k.delete(t),t.i(n))}function j(t,n,e,r){if(t&&t.o){if(k.has(t))return;k.add(t),K.c.push(()=>{k.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function N(t,e,i){const{fragment:l,on_mount:c,on_destroy:u,after_update:s}=t.$$;l&&l.m(e,i),_(()=>{const e=c.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]}),s.forEach(_)}function O(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function T(t,n){-1===t.$$.dirty[0]&&(m.push(t),w||(w=!0,v.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function q(n,o,i,l,c,u,s=[-1]){const a=h;g(n);const f=o.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:e(),dirty:s};let $=!1;d.ctx=i?i(n,f,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),$&&T(n,t)),e}):[],d.update(),$=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&E(n.$$.fragment),N(n,o.target,o.anchor),M()),g(a)}class B{$destroy(){O(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const C=[];function P(n,e=t){let r;const o=[];function l(t){if(i(n,t)&&(n=t,r)){const t=!C.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),C.push(e,n)}if(t){for(let t=0;t<C.length;t+=2)C[t][0](C[t+1]);C.length=0}}}return{set:l,update:function(t){l(t(n))},subscribe:function(i,c=t){const u=[i,c];return o.push(u),1===o.length&&(r=e(l)||t),i(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function S(n,e,i){const l=!Array.isArray(n),c=l?[n]:n,u=e.length<2;return{subscribe:P(i,n=>{let i=!1;const s=[];let a=0,f=t;const d=()=>{if(a)return;f();const r=e(l?s[0]:s,n);u?n(r):f=o(r)?r:t},$=c.map((t,n)=>t.subscribe(t=>{s[n]=t,a&=~(1<<n),i&&d()},()=>{a|=1<<n}));return i=!0,d(),function(){r($),f()}}).subscribe}}const X=P(100),z=P(100),D=S([X,z],([t,n])=>t*n),F=function(t){const n=Math.floor(.1*t);return function(t){let n;for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));n=t[e],t[e]=t[r],t[r]=n}return t}([...Array(t-n-1).fill(null).map(()=>({isMine:!1,stateKnown:!1})),...Array(1).fill(null).map(()=>({isMine:!1,stateKnown:!0})),...Array(n).fill(null).map(()=>({isMine:!0,stateKnown:!1}))])}(c(D)).map((function(t){const{subscribe:n,set:e,update:r}=P(t);return{subscribe:n,set:e,reveal:()=>r(t=>({...t,stateKnown:!0}))}})),G=F.map((t,n)=>function(t){const n=function(t,n,e){const r=t%n,o=Math.floor(t/n);return[[r-1,o-1],[r,o-1],[r+1,o-1],[r-1,o],[r+1,o],[r-1,o+1],[r,o+1],[r+1,o+1]].filter(t=>t[0]>=0).filter(t=>t[1]>=0).filter(t=>t[0]<n).filter(t=>t[1]<e).map(t=>t[0]+t[1]*n)}(t,c(X),c(z)).map(t=>F[t]);return{...S(n,t=>t),reveal:()=>n.forEach(t=>t.reveal())}}(n));function H(n){let e,r;return{c(){var t;e=d("div"),t=n[4],r=document.createTextNode(t),$(e,"class","cell svelte-wjqvhx"),p(e,"color",n[0]),p(e,"background-color",n[3])},m(t,n){a(t,e,n),s(e,r)},p(t,[n]){16&n&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(r,t[4]),1&n&&p(e,"color",t[0]),8&n&&p(e,"background-color",t[3])},i:t,o:t,d(t){t&&f(e)}}}function I(n,e,r){let o,i,c,s=t,a=t;u(n,X,t=>r(18,c=t)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>a());let f,d,$,p,h,g,m,y,b,x,v,w,_,M,A,k,K,{index:E}=e;return n.$set=t=>{"index"in t&&r(5,E=t.index)},n.$$.update=()=>{32&n.$$.dirty&&(r(1,d=F[E]),s(),s=l(d,t=>r(7,o=t))),32&n.$$.dirty&&(r(2,$=G[E]),a(),a=l($,t=>r(11,i=t))),128&n.$$.dirty&&r(6,p=o.isMine),128&n.$$.dirty&&r(8,h=o.stateKnown),320&n.$$.dirty&&r(9,g=h&&!p),2048&n.$$.dirty&&r(10,m=i.filter(t=>!t.stateKnown).length),2048&n.$$.dirty&&r(12,y=i.filter(t=>t.isMine).length),2048&n.$$.dirty&&r(13,b=i.filter(t=>t.isMine&&t.stateKnown).length),12288&n.$$.dirty&&r(14,x=y-b),12800&n.$$.dirty&&r(15,v=g&&y===b),17920&n.$$.dirty&&r(16,w=g&&x===m),32772&n.$$.dirty&&v&&setTimeout(()=>$.reveal(),0),65540&n.$$.dirty&&w&&setTimeout(()=>$.reveal(),0),4416&n.$$.dirty&&r(0,f=h?p?"white":["transparent","blue","green","red","purple","maroon","#0aa","black","#444"][y]:"transparent"),262176&n.$$.dirty&&r(17,_=Math.floor(E/c)),262176&n.$$.dirty&&r(19,M=E%c),655360&n.$$.dirty&&r(20,A=(_+M)%2==0),1048896&n.$$.dirty&&r(3,k=function(t,n,e){return t&&n?"#f55":t&&!n&&e?"#fff":!t||n||e?!t&&e?"#aaa":t||e?void 0:"#999":"#ddd"}(h,p,A)),4160&n.$$.dirty&&r(4,K=p?"X":y)},[f,d,$,k,K,E]}class J extends B{constructor(t){super(),q(this,t,I,H,i,{index:5})}}function L(t,n,e){const r=t.slice();return r[3]=n[e],r[5]=e,r}function Q(n){let e;const r=new J({props:{index:n[5]}});return{c(){var t;(t=r.$$.fragment)&&t.c()},m(t,n){N(r,t,n),e=!0},p:t,i(t){e||(E(r.$$.fragment,t),e=!0)},o(t){j(r.$$.fragment,t),e=!1},d(t){O(r,t)}}}function R(t){let n,e,o,i,l=Array(t[2]).fill(null),c=[];for(let n=0;n<l.length;n+=1)c[n]=Q(L(t,l,n));const u=t=>j(c[t],1,1,()=>{c[t]=null});return{c(){n=d("main"),e=d("div");for(let t=0;t<c.length;t+=1)c[t].c();$(e,"class","board svelte-1a2xkkt"),$(e,"style",o=`grid-template-columns: repeat(${t[0]}, 8px); grid-template-rows: repeat(${t[1]}, 8px)`)},m(t,r){a(t,n,r),s(n,e);for(let t=0;t<c.length;t+=1)c[t].m(e,null);i=!0},p(t,[n]){if(4&n){let o;for(l=Array(t[2]).fill(null),o=0;o<l.length;o+=1){const r=L(t,l,o);c[o]?(c[o].p(r,n),E(c[o],1)):(c[o]=Q(r),c[o].c(),E(c[o],1),c[o].m(e,null))}for(K={r:0,c:[],p:K},o=l.length;o<c.length;o+=1)u(o);K.r||r(K.c),K=K.p}(!i||3&n&&o!==(o=`grid-template-columns: repeat(${t[0]}, 8px); grid-template-rows: repeat(${t[1]}, 8px)`))&&$(e,"style",o)},i(t){if(!i){for(let t=0;t<l.length;t+=1)E(c[t]);i=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)j(c[t]);i=!1},d(t){t&&f(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(c,t)}}}function U(t,n,e){let r,o,i;return u(t,X,t=>e(0,r=t)),u(t,z,t=>e(1,o=t)),u(t,D,t=>e(2,i=t)),[r,o,i]}return new class extends B{constructor(t){super(),q(this,t,U,R,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
